# practice_email_merging

Задача из файла Task.pdf

TODO Доделать запуск из консол


## Алгоритм

По сути нужна структура данных которая одинаково эффективно позволит искать как по ключам, так и по значениям.
Т.к. ограничений по памяти нет -- можно задублировать данные для более эффективного поиска.

Создадим 2 HasMap в первом ключом будет email, а значением -- пользователь. Во втором ключом пользователь, а значением -- список email.
При чтении новой строки мы будем проверять по каждому email есть ли в этот email в первой Map. 
И при совпадении накапливать список пользователей (уникальных) для последующего добавления.

После обработки всех email проверяем список найденных по ним пользователей

* Если их нет -- то добавляем в первую Map всего его email с новым именем пользователя и создаём во второй Map новую запись со списком этих email.
* Если есть -- то считать что новый пользователь - это старый (или старые, если их несколько),
    и последовательно заменяем каждого пользователя на нового в первой Map и удаляем во второй. 
    После создаем их общий email-список и добавляем во вторую Map

После окончания выводим вторую Map в виде строк.

При некорректной строке выбросим исключение.
email не валидируются как email


В принципе вторая Map не обязательна, можно через `Collectors.groupingBy` сгруппировать ключи по значению и вывести из аналогично,
но это второй проход по всем и в худших случаях (мало пользователей, но много email) это будет куда хуже. 
Но зато получим гарантированную уникальности (по ключу - и не нужно будет делать distinct) и если экономим место -- то оптимальный вариант.


Сложность алгоритма `O(n)` т.к. поиск по Map -- `O(1)`, даже в случае плохих хэшей -- `log2 (N)` т.к. HashMap деградирует до RBTree, 
поэтому операции поиска в Map-ах и замена по сути бесплатные.


## Запуск

Стандартная maven сборка. Ожидается установленный Maven и JDK в системе с прописанными путями.

1) Сборка:
```
cd ./practive_email_merging
mvn clean package --file pom.xml
```

2) Получившийся jar-ник нужно запускать через

```
java -jar ./practive_email_merging.jar 
user -> email@host.com
```


P.S.
Но можно посмотреть на CI файл в репозитории :)
